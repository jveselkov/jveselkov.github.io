var app=function(){"use strict";function t(){}const n=t=>t;function e(t,n){for(const e in n)t[e]=n[e];return t}function o(t){return t()}function r(){return Object.create(null)}function s(t){t.forEach(o)}function l(t){return"function"==typeof t}function c(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(n,...e){if(null==n)return t;const o=n.subscribe(...e);return o.unsubscribe?()=>o.unsubscribe():o}function u(t,n,e){t.$$.on_destroy.push(i(n,e))}function f(t){const n={};for(const e in t)"$"!==e[0]&&(n[e]=t[e]);return n}const a="undefined"!=typeof window;let h=a?()=>window.performance.now():()=>Date.now(),d=a?t=>requestAnimationFrame(t):t;const p=new Set;function g(t){p.forEach(n=>{n.c(t)||(p.delete(n),n.f())}),0!==p.size&&d(g)}function m(t,n){t.appendChild(n)}function $(t,n,e){t.insertBefore(n,e||null)}function y(t){t.parentNode.removeChild(t)}function b(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function x(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function v(){return w(" ")}function _(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function I(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function k(t,n,e){t.classList[e?"add":"remove"](n)}function E(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}const z=new Set;let N,A=0;function C(t,n,e,o,r,s,l,c=0){const i=16.666/o;let u="{\n";for(let t=0;t<=1;t+=i){const o=n+(e-n)*s(t);u+=100*t+`%{${l(o,1-o)}}\n`}const f=u+`100% {${l(e,1-e)}}\n}`,a=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(f)}_${c}`,h=t.ownerDocument;z.add(h);const d=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(x("style")).sheet),p=h.__svelte_rules||(h.__svelte_rules={});p[a]||(p[a]=!0,d.insertRule(`@keyframes ${a} ${f}`,d.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?g+", ":""}${a} ${o}ms linear ${r}ms 1 both`,A+=1,a}function D(t,n){const e=(t.style.animation||"").split(", "),o=e.filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")),r=e.length-o.length;r&&(t.style.animation=o.join(", "),A-=r,A||d(()=>{A||(z.forEach(t=>{const n=t.__svelte_stylesheet;let e=n.cssRules.length;for(;e--;)n.deleteRule(e);t.__svelte_rules={}}),z.clear())}))}function F(t){N=t}function M(){const t=function(){if(!N)throw new Error("Function called outside component initialization");return N}();return(n,e)=>{const o=t.$$.callbacks[n];if(o){const r=E(n,e);o.slice().forEach(n=>{n.call(t,r)})}}}const B=[],S=[],O=[],j=[],L=Promise.resolve();let P=!1;function R(t){O.push(t)}let q=!1;const T=new Set;function U(){if(!q){q=!0;do{for(let t=0;t<B.length;t+=1){const n=B[t];F(n),W(n.$$)}for(B.length=0;S.length;)S.pop()();for(let t=0;t<O.length;t+=1){const n=O[t];T.has(n)||(T.add(n),n())}O.length=0}while(B.length);for(;j.length;)j.pop()();P=!1,q=!1,T.clear()}}function W(t){if(null!==t.fragment){t.update(),s(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(R)}}let G;function H(t,n,e){t.dispatchEvent(E(`${n?"intro":"outro"}${e}`))}const J=new Set;let K;function Q(){K={r:0,c:[],p:K}}function V(){K.r||s(K.c),K=K.p}function X(t,n){t&&t.i&&(J.delete(t),t.i(n))}function Y(t,n,e,o){if(t&&t.o){if(J.has(t))return;J.add(t),K.c.push(()=>{J.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}const Z={duration:0};function tt(e,o,r,c){let i=o(e,r),u=c?0:1,f=null,a=null,m=null;function $(){m&&D(e,m)}function y(t,n){const e=t.b-u;return n*=Math.abs(e),{a:u,b:t.b,d:e,duration:n,start:t.start,end:t.start+n,group:t.group}}function b(o){const{delay:r=0,duration:l=300,easing:c=n,tick:b=t,css:x}=i||Z,w={start:h()+r,b:o};o||(w.group=K,K.r+=1),f?a=w:(x&&($(),m=C(e,u,o,l,r,c,x)),o&&b(0,1),f=y(w,l),R(()=>H(e,o,"start")),function(t){let n;0===p.size&&d(g),new Promise(e=>{p.add(n={c:t,f:e})})}(t=>{if(a&&t>a.start&&(f=y(a,l),a=null,H(e,f.b,"start"),x&&($(),m=C(e,u,f.b,f.duration,0,c,i.css))),f)if(t>=f.end)b(u=f.b,1-u),H(e,f.b,"end"),a||(f.b?$():--f.group.r||s(f.group.c)),f=null;else if(t>=f.start){const n=t-f.start;u=f.a+f.d*c(n/f.duration),b(u,1-u)}return!(!f&&!a)}))}return{run(t){l(i)?(G||(G=Promise.resolve(),G.then(()=>{G=null})),G).then(()=>{i=i(),b(t)}):b(t)},end(){$(),f=a=null}}}function nt(t){t&&t.c()}function et(t,n,e){const{fragment:r,on_mount:c,on_destroy:i,after_update:u}=t.$$;r&&r.m(n,e),R(()=>{const n=c.map(o).filter(l);i?i.push(...n):s(n),t.$$.on_mount=[]}),u.forEach(R)}function ot(t,n){const e=t.$$;null!==e.fragment&&(s(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function rt(t,n){-1===t.$$.dirty[0]&&(B.push(t),P||(P=!0,L.then(U)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function st(n,e,o,l,c,i,u=[-1]){const f=N;F(n);const a=e.props||{},h=n.$$={fragment:null,ctx:null,props:i,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:r(),dirty:u};let d=!1;if(h.ctx=o?o(n,a,(t,e,...o)=>{const r=o.length?o[0]:e;return h.ctx&&c(h.ctx[t],h.ctx[t]=r)&&(h.bound[t]&&h.bound[t](r),d&&rt(n,t)),e}):[],h.update(),d=!0,s(h.before_update),h.fragment=!!l&&l(h.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);h.fragment&&h.fragment.l(t),t.forEach(y)}else h.fragment&&h.fragment.c();e.intro&&X(n.$$.fragment),et(n,e.target,e.anchor),U()}F(f)}class lt{$destroy(){ot(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}function ct(t,{delay:e=0,duration:o=400,easing:r=n}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:r,css:t=>"opacity: "+t*s}}function it(t){let n,e,o;return{c(){n=x("div"),I(n,"style",t[2]),I(n,"class","ball svelte-1ezcety"),k(n,"bounce",t[1])},m(t,e){$(t,n,e),o=!0},p(t,e){(!o||4&e)&&I(n,"style",t[2]),2&e&&k(n,"bounce",t[1])},i(t){o||(R(()=>{e||(e=tt(n,ct,{duration:250},!0)),e.run(1)}),o=!0)},o(t){e||(e=tt(n,ct,{duration:250},!1)),e.run(0),o=!1},d(t){t&&y(n),t&&e&&e.end()}}}function ut(t){let n,e,o=t[0]&&it(t);return{c(){o&&o.c(),n=w("")},m(t,r){o&&o.m(t,r),$(t,n,r),e=!0},p(t,[e]){t[0]?o?(o.p(t,e),1&e&&X(o,1)):(o=it(t),o.c(),X(o,1),o.m(n.parentNode,n)):o&&(Q(),Y(o,1,1,()=>{o=null}),V())},i(t){e||(X(o),e=!0)},o(t){Y(o),e=!1},d(t){o&&o.d(t),t&&y(n)}}}function ft(t,n,e){let o,{color:r=0}=n,{selected:s=!1}=n;return t.$set=t=>{"color"in t&&e(0,r=t.color),"selected"in t&&e(1,s=t.selected)},t.$$.update=()=>{1&t.$$.dirty&&e(2,o=void 0!==r?`background: radial-gradient(circle at 0.5em 0.5em, var(--ball-color-${r}), #000);`:"")},[r,s,o]}class at extends lt{constructor(t){super(),st(this,t,ft,ut,c,{color:0,selected:1})}}function ht(t){let n,o,r,s;const l=[t[1]];let c={};for(let t=0;t<l.length;t+=1)c=e(c,l[t]);const i=new at({props:c});return{c(){n=x("div"),nt(i.$$.fragment),I(n,"class","field svelte-4xxsxs")},m(e,l){$(e,n,l),et(i,n,null),o=!0,r||(s=_(n,"click",t[0]),r=!0)},p(t,[n]){const e=2&n?function(t,n){const e={},o={},r={$$scope:1};let s=t.length;for(;s--;){const l=t[s],c=n[s];if(c){for(const t in l)t in c||(o[t]=1);for(const t in c)r[t]||(e[t]=c[t],r[t]=1);t[s]=c}else for(const t in l)r[t]=1}for(const t in o)t in e||(e[t]=void 0);return e}(l,[(o=t[1],"object"==typeof o&&null!==o?o:{})]):{};var o;i.$set(e)},i(t){o||(X(i.$$.fragment,t),o=!0)},o(t){Y(i.$$.fragment,t),o=!1},d(t){t&&y(n),ot(i),r=!1,s()}}}function dt(t,n,o){let{color:r=0}=n;const s=M();return t.$set=t=>{o(1,n=e(e({},n),f(t))),"color"in t&&o(2,r=t.color)},[function(){s(0===r?"empty-cell-click":"cell-click")},n=f(n),r]}class pt extends lt{constructor(t){super(),st(this,t,dt,ht,c,{color:2})}}const gt=[];function mt(n,e=t){let o;const r=[];function s(t){if(c(n,t)&&(n=t,o)){const t=!gt.length;for(let t=0;t<r.length;t+=1){const e=r[t];e[1](),gt.push(e,n)}if(t){for(let t=0;t<gt.length;t+=2)gt[t][0](gt[t+1]);gt.length=0}}}return{set:s,update:function(t){s(t(n))},subscribe:function(l,c=t){const i=[l,c];return r.push(i),1===r.length&&(o=e(s)||t),l(n),()=>{const t=r.indexOf(i);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}const $t=function(){const{subscribe:t,set:n,update:e}=mt(0);return{subscribe:t,add:t=>e(n=>n+(5+2*(t-5))),reset:()=>n(0)}}();const yt=function(t,n){const e=(t,n)=>new Array(t).fill(new Array(n).fill(0)),{subscribe:o,set:r,update:s}=mt(e(n,t)),l=(t,{rowIndex:n,cellIndex:e,value:o})=>{const r=[...t[n]];return r[e]=o,t[n]=r,t};return{subscribe:o,setBall:(t,n,e)=>{s(o=>l(o,{rowIndex:t,cellIndex:n,value:e}))},moveBall:(t,n)=>{s(e=>{let o=e[t.rowIndex][t.cellIndex];return l(l(e,{...n,value:o}),{...t,value:0})})},eraseLine:t=>{s(n=>(t.forEach(t=>{n=l(n,{...t,value:0})}),n))},reset:()=>r(e(n,t))}}(9,9),bt=function(n,e,o){const r=!Array.isArray(n),c=r?[n]:n,u=e.length<2;return{subscribe:mt(o,n=>{let o=!1;const f=[];let a=0,h=t;const d=()=>{if(a)return;h();const o=e(r?f[0]:f,n);u?n(o):h=l(o)?o:t},p=c.map((t,n)=>i(t,t=>{f[n]=t,a&=~(1<<n),o&&d()},()=>{a|=1<<n}));return o=!0,d(),function(){s(p),h()}}).subscribe}}(yt,t=>t.flat().filter(t=>0===t).length);function xt(t){this.content=[],this.scoreFunction=t}function wt(t,n,e){this.x=t,this.y=n,this.weight=e}function vt(t,n){n=n||{},this.nodes=[],this.diagonal=!!n.diagonal,this.grid=[];for(let n=0;n<t.length;n++){this.grid[n]=[];for(let e=0,o=t[n];e<o.length;e++){let t=new wt(n,e,o[e]);this.grid[n][e]=t,this.nodes.push(t)}}this.init()}function _t(t){let n=t;const e=[];for(;n.parent;)e.unshift(n),n=n.parent;return e}xt.prototype={push(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop(){let t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t},remove(t){let n=this.content.indexOf(t),e=this.content.pop();n===this.content.length-1&&(this.content[n]=e,this.scoreFunction(e)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))},size(){return this.content.length},rescoreElement(t){this.sinkDown(this.content.indexOf(t))},sinkDown(t){let n=this.content[t];for(;t>0;){let e=(t+1>>1)-1,o=this.content[e];if(!(this.scoreFunction(n)<this.scoreFunction(o)))break;this.content[e]=n,this.content[t]=o,t=e}},bubbleUp(t){let n=this.content.length,e=this.content[t],o=this.scoreFunction(e);for(;;){let r,s=t+1<<1,l=s-1,c=null;if(l<n){let t=this.content[l];r=this.scoreFunction(t),r<o&&(c=l)}if(s<n){let t=this.content[s];this.scoreFunction(t)<(null===c?o:r)&&(c=s)}if(null===c)break;this.content[t]=this.content[c],this.content[c]=e,t=c}}},wt.prototype.toString=function(){return`[${this.x} ${this.y}]`},wt.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},wt.prototype.isWall=function(){return 0===this.weight},vt.prototype.init=function(){this.dirtyNodes=[];for(let t=0;t<this.nodes.length;t++)It.cleanNode(this.nodes[t])},vt.prototype.cleanDirty=function(){for(let t=0;t<this.dirtyNodes.length;t++)It.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},vt.prototype.markDirty=function(t){this.dirtyNodes.push(t)},vt.prototype.neighbors=function(t){const n=[],e=t.x,o=t.y,r=this.grid;return r[e-1]&&r[e-1][o]&&n.push(r[e-1][o]),r[e+1]&&r[e+1][o]&&n.push(r[e+1][o]),r[e]&&r[e][o-1]&&n.push(r[e][o-1]),r[e]&&r[e][o+1]&&n.push(r[e][o+1]),this.diagonal?(r[e-1]&&r[e-1][o-1]&&n.push(r[e-1][o-1]),r[e+1]&&r[e+1][o-1]&&n.push(r[e+1][o-1]),r[e-1]&&r[e-1][o+1]&&n.push(r[e-1][o+1]),r[e+1]&&r[e+1][o+1]&&n.push(r[e+1][o+1]),n):n},vt.prototype.toString=function(){const t=[],n=this.grid;for(let e=0;e<n.length;e++){const o=[],r=n[e];for(let t=0;t<r.length;t++)o.push(r[t].weight);t.push(o.join(" "))}return t.join("\n")};const It={search(t,n,e,o){t.cleanDirty();let r=(o=o||{}).heuristic||It.heuristics.manhattan,s=o.closest||!1,l=new xt(t=>t.f),c=n;for(n.h=r(n,e),t.markDirty(n),l.push(n);l.size()>0;){let n=l.pop();if(n===e)return _t(n);n.closed=!0;let o=t.neighbors(n);for(let i=0,u=o.length;i<u;++i){let u=o[i];if(u.closed||u.isWall())continue;let f=n.g+u.getCost(n),a=u.visited;(!a||f<u.g)&&(u.visited=!0,u.parent=n,u.h=u.h||r(u,e),u.g=f,u.f=u.g+u.h,t.markDirty(u),s&&(u.h<c.h||u.h===c.h&&u.g<c.g)&&(c=u),a?l.rescoreElement(u):l.push(u))}}return s?_t(c):[]},heuristics:{manhattan:(t,n)=>Math.abs(n.x-t.x)+Math.abs(n.y-t.y),diagonal(t,n){let e=Math.sqrt(2),o=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y);return 1*(o+r)+(e-2)*Math.min(o,r)}},cleanNode(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function kt(t,n){let e=t-.5+Math.random()*(n-t+1);return Math.round(e)}const Et=(t,n)=>new Array(n).fill(0).map(()=>kt(1,t));const zt=function(t,n,e){const{subscribe:o,set:r}=mt(Et(t,e));return{subscribe:o,random:()=>r(Et(t,n)),reset:()=>r(Et(t,e))}}(5,3,65);const Nt=function(t){const n={rowIndex:null,cellIndex:null},{subscribe:e,set:o,update:r}=mt(n);return{subscribe:e,set:t=>r(()=>t),reset:()=>o(n)}}();function At(t,n,e){const o=t.slice();return o[18]=n[e],o[20]=e,o}function Ct(t,n,e){const o=t.slice();return o[15]=n[e],o[17]=e,o}function Dt(t,n,e){const o=t.slice();return o[21]=n[e],o}function Ft(t){let n,e,o=t[1],r=[];for(let n=0;n<o.length;n+=1)r[n]=Bt(Dt(t,o,n));const s=t=>Y(r[t],1,1,()=>{r[t]=null});return{c(){n=x("div");for(let t=0;t<r.length;t+=1)r[t].c();I(n,"class","next svelte-zceotk")},m(t,o){$(t,n,o);for(let t=0;t<r.length;t+=1)r[t].m(n,null);e=!0},p(t,e){if(2&e){let l;for(o=t[1],l=0;l<o.length;l+=1){const s=Dt(t,o,l);r[l]?(r[l].p(s,e),X(r[l],1)):(r[l]=Bt(s),r[l].c(),X(r[l],1),r[l].m(n,null))}for(Q(),l=o.length;l<r.length;l+=1)s(l);V()}},i(t){if(!e){for(let t=0;t<o.length;t+=1)X(r[t]);e=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Y(r[t]);e=!1},d(t){t&&y(n),b(r,t)}}}function Mt(n){let e;return{c(){e=x("p"),e.textContent="Game over",I(e,"class","svelte-zceotk")},m(t,n){$(t,e,n)},p:t,i:t,o:t,d(t){t&&y(e)}}}function Bt(t){let n;const e=new pt({props:{color:t[21]}});return{c(){nt(e.$$.fragment)},m(t,o){et(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.color=t[21]),e.$set(o)},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function St(t){let n;const e=new pt({props:{selected:t[2].rowIndex===t[17]&&t[2].cellIndex===t[20],color:t[18]}});return e.$on("cell-click",(function(...n){return t[13](t[17],t[20],...n)})),e.$on("empty-cell-click",(function(...n){return t[14](t[17],t[20],...n)})),{c(){nt(e.$$.fragment)},m(t,o){et(e,t,o),n=!0},p(n,o){t=n;const r={};4&o&&(r.selected=t[2].rowIndex===t[17]&&t[2].cellIndex===t[20]),8&o&&(r.color=t[18]),e.$set(r)},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Ot(t){let n,e,o,r=t[15],s=[];for(let n=0;n<r.length;n+=1)s[n]=St(At(t,r,n));const l=t=>Y(s[t],1,1,()=>{s[t]=null});return{c(){n=x("div");for(let t=0;t<s.length;t+=1)s[t].c();e=v(),I(n,"class","row svelte-zceotk")},m(t,r){$(t,n,r);for(let t=0;t<s.length;t+=1)s[t].m(n,null);m(n,e),o=!0},p(t,o){if(108&o){let c;for(r=t[15],c=0;c<r.length;c+=1){const l=At(t,r,c);s[c]?(s[c].p(l,o),X(s[c],1)):(s[c]=St(l),s[c].c(),X(s[c],1),s[c].m(n,e))}for(Q(),c=r.length;c<s.length;c+=1)l(c);V()}},i(t){if(!o){for(let t=0;t<r.length;t+=1)X(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)Y(s[t]);o=!1},d(t){t&&y(n),b(s,t)}}}function jt(t){let n,e,o,r,s,l,c,i,u,f,a,h,d,p;const g=[Mt,Ft],k=[];function E(t,n){return t[0]?0:1}c=E(t),i=k[c]=g[c](t);let z=t[3],N=[];for(let n=0;n<z.length;n+=1)N[n]=Ot(Ct(t,z,n));const A=t=>Y(N[t],1,1,()=>{N[t]=null});return{c(){n=x("div"),e=x("div"),o=x("p"),r=w("Score: "),s=w(t[4]),l=v(),i.c(),u=v(),f=x("button"),f.textContent="restart",a=v();for(let t=0;t<N.length;t+=1)N[t].c();I(o,"class","svelte-zceotk"),I(f,"class","svelte-zceotk"),I(e,"class","top svelte-zceotk"),I(n,"class","board svelte-zceotk")},m(i,g){$(i,n,g),m(n,e),m(e,o),m(o,r),m(o,s),m(e,l),k[c].m(e,null),m(e,u),m(e,f),m(n,a);for(let t=0;t<N.length;t+=1)N[t].m(n,null);h=!0,d||(p=_(f,"click",t[12]),d=!0)},p(t,[o]){(!h||16&o)&&function(t,n){n=""+n,t.data!==n&&(t.data=n)}(s,t[4]);let r=c;if(c=E(t),c===r?k[c].p(t,o):(Q(),Y(k[r],1,1,()=>{k[r]=null}),V(),i=k[c],i||(i=k[c]=g[c](t),i.c()),X(i,1),i.m(e,u)),108&o){let e;for(z=t[3],e=0;e<z.length;e+=1){const r=Ct(t,z,e);N[e]?(N[e].p(r,o),X(N[e],1)):(N[e]=Ot(r),N[e].c(),X(N[e],1),N[e].m(n,null))}for(Q(),e=z.length;e<N.length;e+=1)A(e);V()}},i(t){if(!h){X(i);for(let t=0;t<z.length;t+=1)X(N[t]);h=!0}},o(t){Y(i),N=N.filter(Boolean);for(let t=0;t<N.length;t+=1)Y(N[t]);h=!1},d(t){t&&y(n),k[c].d(),b(N,t),d=!1,p()}}}function Lt(t,n,e){let o,r,s,l,c;u(t,bt,t=>e(8,o=t)),u(t,zt,t=>e(1,r=t)),u(t,Nt,t=>e(2,s=t)),u(t,yt,t=>e(3,l=t)),u(t,$t,t=>e(4,c=t));let i=!1;function f(t,n){s.rowIndex!==t||s.cellIndex!==n?Nt.set({rowIndex:t,cellIndex:n}):Nt.reset()}async function a(t,n){if(i||null==s.rowIndex||null==s.cellIndex)return;const e=function(t,n,e,o,r){const s=new vt(t.map(t=>t.map(t=>t?0:1))),l=It.search(s,s.grid[n][e],s.grid[o][r]).map(t=>({rowIndex:t.x,cellIndex:t.y}));return l.length>0?[{rowIndex:n,cellIndex:e},...l]:[]}(l,s.rowIndex,s.cellIndex,t,n);Nt.reset();let o=!1;e.length>0&&(await h(e),o=!0);const r=await d(t,n);o&&!r&&p()}async function h(t){return new Promise(n=>{for(let e=1;e<t.length;e++)setTimeout(()=>{yt.moveBall(t[e-1],t[e]),e===t.length-1&&n()},100*e)})}async function d(t,n){return new Promise(e=>{setTimeout(()=>{const o=function(t,n,e){if(null==t[n][e])return[];const o=t[0].length,r=t.length,s=[],l=[];for(let o=e;o>=0&&t[n][o]===t[n][e];o--)l.push({rowIndex:n,cellIndex:o});for(let r=e+1;r<o&&t[n][r]===t[n][e];r++)l.push({rowIndex:n,cellIndex:r});const c=[];for(let o=n;o>=0&&t[o][e]===t[n][e];o--)c.push({rowIndex:o,cellIndex:e});for(let o=n+1;o<r&&t[o][e]===t[n][e];o++)c.push({rowIndex:o,cellIndex:e});return l.length>=5&&s.push(l),c.length>=5&&s.push(c),s.flat()}(l,t,n);0!==o.length&&($t.add(o.length),yt.eraseLine(o),e(!0)),e(!1)},500)})}function p(){r.forEach(async t=>{let n=function(t){let n,e;do{n=kt(0,t.length-1),e=kt(0,t[0].length-1)}while(0!==t[n][e]);return{rowIndex:n,cellIndex:e}}(l);yt.setBall(n.rowIndex,n.cellIndex,t),await d(n.rowIndex,n.cellIndex)}),zt.random()}function g(){Nt.reset(),yt.reset(),zt.reset(),$t.reset(),e(0,i=!1),p()}g();return t.$$.update=()=>{258&t.$$.dirty&&e(0,i=o-r.length<=0)},[i,r,s,l,c,f,a,g,o,h,d,p,()=>g(),(t,n)=>f(t,n),(t,n)=>a(t,n)]}class Pt extends lt{constructor(t){super(),st(this,t,Lt,jt,c,{})}}function Rt(n){let e;const o=new Pt({});return{c(){nt(o.$$.fragment)},m(t,n){et(o,t,n),e=!0},p:t,i(t){e||(X(o.$$.fragment,t),e=!0)},o(t){Y(o.$$.fragment,t),e=!1},d(t){ot(o,t)}}}return new class extends lt{constructor(t){super(),st(this,t,null,Rt,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
