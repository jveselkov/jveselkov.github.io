var app=function(){"use strict";function t(){}const n=t=>t;function e(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(e)}function l(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t){return null==t?"":t}const s="undefined"!=typeof window;let u=s?()=>window.performance.now():()=>Date.now(),f=s?t=>requestAnimationFrame(t):t;const h=new Set;function a(t){h.forEach(n=>{n.c(t)||(h.delete(n),n.f())}),0!==h.size&&f(a)}function d(t){let n;return 0===h.size&&f(a),{promise:new Promise(e=>{h.add(n={c:t,f:e})}),abort(){h.delete(n)}}}function p(t,n){t.appendChild(n)}function g(t,n,e){t.insertBefore(n,e||null)}function m(t){t.parentNode.removeChild(t)}function y(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function $(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function w(){return x(" ")}function v(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function b(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function I(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}const _=new Set;let k,E=0;function j(t,n,e,o,r,l,i,c=0){const s=16.666/o;let u="{\n";for(let t=0;t<=1;t+=s){const o=n+(e-n)*l(t);u+=100*t+`%{${i(o,1-o)}}\n`}const f=u+`100% {${i(e,1-e)}}\n}`,h=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(f)}_${c}`,a=t.ownerDocument;_.add(a);const d=a.__svelte_stylesheet||(a.__svelte_stylesheet=a.head.appendChild($("style")).sheet),p=a.__svelte_rules||(a.__svelte_rules={});p[h]||(p[h]=!0,d.insertRule(`@keyframes ${h} ${f}`,d.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?g+", ":""}${h} ${o}ms linear ${r}ms 1 both`,E+=1,h}function C(t,n){const e=(t.style.animation||"").split(", "),o=e.filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")),r=e.length-o.length;r&&(t.style.animation=o.join(", "),E-=r,E||f(()=>{E||(_.forEach(t=>{const n=t.__svelte_stylesheet;let e=n.cssRules.length;for(;e--;)n.deleteRule(e);t.__svelte_rules={}}),_.clear())}))}function D(t){k=t}function N(){const t=function(){if(!k)throw new Error("Function called outside component initialization");return k}();return(n,e)=>{const o=t.$$.callbacks[n];if(o){const r=I(n,e);o.slice().forEach(n=>{n.call(t,r)})}}}const F=[],M=[],A=[],S=[],O=Promise.resolve();let z=!1;function P(t){A.push(t)}let B=!1;const R=new Set;function q(){if(!B){B=!0;do{for(let t=0;t<F.length;t+=1){const n=F[t];D(n),T(n.$$)}for(F.length=0;M.length;)M.pop()();for(let t=0;t<A.length;t+=1){const n=A[t];R.has(n)||(R.add(n),n())}A.length=0}while(F.length);for(;S.length;)S.pop()();z=!1,B=!1,R.clear()}}function T(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(P)}}let U;function L(){return U||(U=Promise.resolve(),U.then(()=>{U=null})),U}function W(t,n,e){t.dispatchEvent(I(`${n?"intro":"outro"}${e}`))}const G=new Set;let H;function J(){H={r:0,c:[],p:H}}function K(){H.r||r(H.c),H=H.p}function Q(t,n){t&&t.i&&(G.delete(t),t.i(n))}function V(t,n,e,o){if(t&&t.o){if(G.has(t))return;G.add(t),H.c.push(()=>{G.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}const X={duration:0};function Y(t){t&&t.c()}function Z(t,n,o){const{fragment:i,on_mount:c,on_destroy:s,after_update:u}=t.$$;i&&i.m(n,o),P(()=>{const n=c.map(e).filter(l);s?s.push(...n):r(n),t.$$.on_mount=[]}),u.forEach(P)}function tt(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function nt(t,n){-1===t.$$.dirty[0]&&(F.push(t),z||(z=!0,O.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function et(n,e,l,i,c,s,u=[-1]){const f=k;D(n);const h=e.props||{},a=n.$$={fragment:null,ctx:null,props:s,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:o(),dirty:u};let d=!1;if(a.ctx=l?l(n,h,(t,e,...o)=>{const r=o.length?o[0]:e;return a.ctx&&c(a.ctx[t],a.ctx[t]=r)&&(a.bound[t]&&a.bound[t](r),d&&nt(n,t)),e}):[],a.update(),d=!0,r(a.before_update),a.fragment=!!i&&i(a.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);a.fragment&&a.fragment.l(t),t.forEach(m)}else a.fragment&&a.fragment.c();e.intro&&Q(n.$$.fragment),Z(n,e.target,e.anchor),q()}D(f)}class ot{$destroy(){tt(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}function rt(t,{delay:e=0,duration:o=400,easing:r=n}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:r,css:t=>"opacity: "+t*l}}function lt(e){let o,i,s,f,h;return{c(){o=$("div"),b(o,"style",e[1]),b(o,"class",i=c(e[2])+" svelte-ydere0")},m(t,n){g(t,o,n),h=!0},p(t,n){(!h||2&n)&&b(o,"style",t[1]),(!h||4&n&&i!==(i=c(t[2])+" svelte-ydere0"))&&b(o,"class",i)},i(e){h||(P(()=>{f&&f.end(1),s||(s=function(e,o,r){let i,c,s=o(e,r),f=!1,h=0;function a(){i&&C(e,i)}function p(){const{delay:o=0,duration:r=300,easing:l=n,tick:p=t,css:g}=s||X;g&&(i=j(e,0,1,r,o,l,g,h++)),p(0,1);const m=u()+o,y=m+r;c&&c.abort(),f=!0,P(()=>W(e,!0,"start")),c=d(t=>{if(f){if(t>=y)return p(1,0),W(e,!0,"end"),a(),f=!1;if(t>=m){const n=l((t-m)/r);p(n,1-n)}}return f})}let g=!1;return{start(){g||(C(e),l(s)?(s=s(),L().then(p)):p())},invalidate(){g=!1},end(){f&&(a(),f=!1)}}}(o,rt,{duration:250})),s.start()}),h=!0)},o(e){s&&s.invalidate(),f=function(e,o,i){let c,s=o(e,i),f=!0;const h=H;function a(){const{delay:o=0,duration:l=300,easing:i=n,tick:a=t,css:p}=s||X;p&&(c=j(e,1,0,l,o,i,p));const g=u()+o,m=g+l;P(()=>W(e,!1,"start")),d(t=>{if(f){if(t>=m)return a(0,1),W(e,!1,"end"),--h.r||r(h.c),!1;if(t>=g){const n=i((t-g)/l);a(1-n,n)}}return f})}return h.r+=1,l(s)?L().then(()=>{s=s(),a()}):a(),{end(t){t&&s.tick&&s.tick(1,0),f&&(c&&C(e,c),f=!1)}}}(o,rt,{}),h=!1},d(t){t&&m(o),t&&f&&f.end()}}}function it(t){let n,e,o,r,l=t[0]&&lt(t);return{c(){n=$("div"),l&&l.c(),b(n,"class","field svelte-ydere0")},m(i,c){g(i,n,c),l&&l.m(n,null),e=!0,o||(r=v(n,"click",t[3]),o=!0)},p(t,[e]){t[0]?l?(l.p(t,e),1&e&&Q(l,1)):(l=lt(t),l.c(),Q(l,1),l.m(n,null)):l&&(J(),V(l,1,1,()=>{l=null}),K())},i(t){e||(Q(l),e=!0)},o(t){V(l),e=!1},d(t){t&&m(n),l&&l.d(),o=!1,r()}}}function ct(t,n,e){let{color:o}=n,{selected:r}=n;const l=N();let i,c;return t.$set=t=>{"color"in t&&e(0,o=t.color),"selected"in t&&e(4,r=t.selected)},t.$$.update=()=>{1&t.$$.dirty&&e(1,i=void 0!==o?`background: radial-gradient(circle at 0.5em 0.5em, var(--ball-color-${o}), #000);`:""),17&t.$$.dirty&&e(2,c=void 0!==o?"ball filled"+(r?" bounce":""):"ball")},[o,i,c,function(){l(o?"cell-click":"empty-cell-click")},r]}class st extends ot{constructor(t){super(),et(this,t,ct,it,i,{color:0,selected:4})}}function ut(t){this.content=[],this.scoreFunction=t}function ft(t,n,e){this.x=t,this.y=n,this.weight=e}function ht(t,n){n=n||{},this.nodes=[],this.diagonal=!!n.diagonal,this.grid=[];for(let n=0;n<t.length;n++){this.grid[n]=[];for(let e=0,o=t[n];e<o.length;e++){let t=new ft(n,e,o[e]);this.grid[n][e]=t,this.nodes.push(t)}}this.init()}function at(t){let n=t;const e=[];for(;n.parent;)e.unshift(n),n=n.parent;return e}ut.prototype={push(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop(){let t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t},remove(t){let n=this.content.indexOf(t),e=this.content.pop();n===this.content.length-1&&(this.content[n]=e,this.scoreFunction(e)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))},size(){return this.content.length},rescoreElement(t){this.sinkDown(this.content.indexOf(t))},sinkDown(t){let n=this.content[t];for(;t>0;){let e=(t+1>>1)-1,o=this.content[e];if(!(this.scoreFunction(n)<this.scoreFunction(o)))break;this.content[e]=n,this.content[t]=o,t=e}},bubbleUp(t){let n=this.content.length,e=this.content[t],o=this.scoreFunction(e);for(;;){let r,l=t+1<<1,i=l-1,c=null;if(i<n){let t=this.content[i];r=this.scoreFunction(t),r<o&&(c=i)}if(l<n){let t=this.content[l];this.scoreFunction(t)<(null===c?o:r)&&(c=l)}if(null===c)break;this.content[t]=this.content[c],this.content[c]=e,t=c}}},ft.prototype.toString=function(){return`[${this.x} ${this.y}]`},ft.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},ft.prototype.isWall=function(){return 0===this.weight},ht.prototype.init=function(){this.dirtyNodes=[];for(let t=0;t<this.nodes.length;t++)dt.cleanNode(this.nodes[t])},ht.prototype.cleanDirty=function(){for(let t=0;t<this.dirtyNodes.length;t++)dt.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},ht.prototype.markDirty=function(t){this.dirtyNodes.push(t)},ht.prototype.neighbors=function(t){const n=[],e=t.x,o=t.y,r=this.grid;return r[e-1]&&r[e-1][o]&&n.push(r[e-1][o]),r[e+1]&&r[e+1][o]&&n.push(r[e+1][o]),r[e]&&r[e][o-1]&&n.push(r[e][o-1]),r[e]&&r[e][o+1]&&n.push(r[e][o+1]),this.diagonal?(r[e-1]&&r[e-1][o-1]&&n.push(r[e-1][o-1]),r[e+1]&&r[e+1][o-1]&&n.push(r[e+1][o-1]),r[e-1]&&r[e-1][o+1]&&n.push(r[e-1][o+1]),r[e+1]&&r[e+1][o+1]&&n.push(r[e+1][o+1]),n):n},ht.prototype.toString=function(){const t=[],n=this.grid;for(let e=0;e<n.length;e++){const o=[],r=n[e];for(let t=0;t<r.length;t++)o.push(r[t].weight);t.push(o.join(" "))}return t.join("\n")};const dt={search(t,n,e,o){t.cleanDirty();let r=(o=o||{}).heuristic||dt.heuristics.manhattan,l=o.closest||!1,i=new ut(t=>t.f),c=n;for(n.h=r(n,e),t.markDirty(n),i.push(n);i.size()>0;){let n=i.pop();if(n===e)return at(n);n.closed=!0;let o=t.neighbors(n);for(let s=0,u=o.length;s<u;++s){let u=o[s];if(u.closed||u.isWall())continue;let f=n.g+u.getCost(n),h=u.visited;(!h||f<u.g)&&(u.visited=!0,u.parent=n,u.h=u.h||r(u,e),u.g=f,u.f=u.g+u.h,t.markDirty(u),l&&(u.h<c.h||u.h===c.h&&u.g<c.g)&&(c=u),h?i.rescoreElement(u):i.push(u))}}return l?at(c):[]},heuristics:{manhattan:(t,n)=>Math.abs(n.x-t.x)+Math.abs(n.y-t.y),diagonal(t,n){let e=Math.sqrt(2),o=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y);return 1*(o+r)+(e-2)*Math.min(o,r)}},cleanNode(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function pt(t,n){let e=t-.5+Math.random()*(n-t+1);return Math.round(e)}function gt(t,n,e,o){const r=[...t[n]];return r[e]=o,t[n]=r,t}function mt(t){let n,e;do{n=pt(0,8),e=pt(0,8)}while(void 0!==t[n][e]);return{rowIndex:n,cellIndex:e}}function yt(t){return function(t,n){const{rowIndex:e,cellIndex:o}=mt(t);return gt(t,e,o,n)}(t,pt(1,5))}function $t(){const t=[];for(let n=0;n<3;n++)t.push(pt(1,5));return t}function xt(){return function(t,n){let e=t;for(let t=0;t<n;t++)e=yt(e);return e}(new Array(9).fill(new Array(9).fill(void 0)),5)}function wt(t,n,e,o,r){const l=t[n][e];return gt(gt(t,n,e,void 0),o,r,l)}function vt(t,n,e){const o=t.slice();return o[17]=n[e],o[19]=e,o}function bt(t,n,e){const o=t.slice();return o[14]=n[e],o[16]=e,o}function It(t,n,e){const o=t.slice();return o[20]=n[e],o}function _t(t){let n;const e=new st({props:{color:t[20]}});return{c(){Y(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},p(t,n){const o={};8&n&&(o.color=t[20]),e.$set(o)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function kt(t){let n;const e=new st({props:{color:t[17],selected:t[0].rowIndex===t[16]&&t[0].cellIndex===t[19]}});return e.$on("cell-click",(function(...n){return t[12](t[16],t[19],...n)})),e.$on("empty-cell-click",(function(...n){return t[13](t[16],t[19],...n)})),{c(){Y(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},p(n,o){t=n;const r={};2&o&&(r.color=t[17]),1&o&&(r.selected=t[0].rowIndex===t[16]&&t[0].cellIndex===t[19]),e.$set(r)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function Et(t){let n,e,o,r=t[14],l=[];for(let n=0;n<r.length;n+=1)l[n]=kt(vt(t,r,n));const i=t=>V(l[t],1,1,()=>{l[t]=null});return{c(){n=$("div");for(let t=0;t<l.length;t+=1)l[t].c();e=w(),b(n,"class","row svelte-pjjluo")},m(t,r){g(t,n,r);for(let t=0;t<l.length;t+=1)l[t].m(n,null);p(n,e),o=!0},p(t,o){if(195&o){let c;for(r=t[14],c=0;c<r.length;c+=1){const i=vt(t,r,c);l[c]?(l[c].p(i,o),Q(l[c],1)):(l[c]=kt(i),l[c].c(),Q(l[c],1),l[c].m(n,e))}for(J(),c=r.length;c<l.length;c+=1)i(c);K()}},i(t){if(!o){for(let t=0;t<r.length;t+=1)Q(l[t]);o=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)V(l[t]);o=!1},d(t){t&&m(n),y(l,t)}}}function jt(t){let n;return{c(){n=$("h2"),n.textContent="Game over"},m(t,e){g(t,n,e)},d(t){t&&m(n)}}}function Ct(t){let n,e,o,r,l,i,c,s,u,f,h,a,d,I,_=t[3],k=[];for(let n=0;n<_.length;n+=1)k[n]=_t(It(t,_,n));const E=t=>V(k[t],1,1,()=>{k[t]=null});let j=t[1],C=[];for(let n=0;n<j.length;n+=1)C[n]=Et(bt(t,j,n));const D=t=>V(C[t],1,1,()=>{C[t]=null});let N=t[4]&&jt();return{c(){n=$("div"),e=$("h2"),o=x("Score: "),r=x(t[2]),l=w();for(let t=0;t<k.length;t+=1)k[t].c();i=w(),c=$("button"),c.textContent="restart",s=w(),u=$("div");for(let t=0;t<C.length;t+=1)C[t].c();f=w(),h=$("div"),N&&N.c(),b(e,"class","svelte-pjjluo"),b(c,"class","svelte-pjjluo"),b(n,"class","top svelte-pjjluo"),b(u,"class","board svelte-pjjluo"),b(h,"class","bottom svelte-pjjluo")},m(m,y){g(m,n,y),p(n,e),p(e,o),p(e,r),p(n,l);for(let t=0;t<k.length;t+=1)k[t].m(n,null);p(n,i),p(n,c),g(m,s,y),g(m,u,y);for(let t=0;t<C.length;t+=1)C[t].m(u,null);g(m,f,y),g(m,h,y),N&&N.m(h,null),a=!0,d||(I=v(c,"click",t[11]),d=!0)},p(t,[e]){if((!a||4&e)&&function(t,n){n=""+n,t.data!==n&&(t.data=n)}(r,t[2]),8&e){let o;for(_=t[3],o=0;o<_.length;o+=1){const r=It(t,_,o);k[o]?(k[o].p(r,e),Q(k[o],1)):(k[o]=_t(r),k[o].c(),Q(k[o],1),k[o].m(n,i))}for(J(),o=_.length;o<k.length;o+=1)E(o);K()}if(195&e){let n;for(j=t[1],n=0;n<j.length;n+=1){const o=bt(t,j,n);C[n]?(C[n].p(o,e),Q(C[n],1)):(C[n]=Et(o),C[n].c(),Q(C[n],1),C[n].m(u,null))}for(J(),n=j.length;n<C.length;n+=1)D(n);K()}t[4]?N||(N=jt(),N.c(),N.m(h,null)):N&&(N.d(1),N=null)},i(t){if(!a){for(let t=0;t<_.length;t+=1)Q(k[t]);for(let t=0;t<j.length;t+=1)Q(C[t]);a=!0}},o(t){k=k.filter(Boolean);for(let t=0;t<k.length;t+=1)V(k[t]);C=C.filter(Boolean);for(let t=0;t<C.length;t+=1)V(C[t]);a=!1},d(t){t&&m(n),y(k,t),t&&m(s),t&&m(u),y(C,t),t&&m(f),t&&m(h),N&&N.d(),d=!1,I()}}}function Dt(t,n,e){let o,r,l,i,c;function s(){e(0,o={rowIndex:null,cellIndex:null})}function u(){s(),e(1,r=xt()),e(2,l=0),e(3,i=[...$t()]),e(4,c=!1)}function f(t,n){o.rowIndex!==t||o.cellIndex!==n?e(0,o={rowIndex:t,cellIndex:n}):s()}async function h(t,n){if(null==o.rowIndex&&null==o.cellIndex)return;let l=!1;const u=function(t,n,e,o,r){const l=new ht(t.map(t=>t.map(t=>t?0:1)));return[{rowIndex:n,cellIndex:e},...dt.search(l,l.grid[n][e],l.grid[o][r]).map(t=>({rowIndex:t.x,cellIndex:t.y}))]}(r,o.rowIndex,o.cellIndex,t,n);u.length>0&&(await a(u),l=!0);const f=await d(t,n);!function(t){return t.flat().filter(t=>void 0!==t).length+3>=81}(r)?(l&&!f&&(i.forEach(async t=>{const n=mt(r);e(1,r=gt(r,n.rowIndex,n.cellIndex,t)),await d(n.rowIndex,n.cellIndex)}),e(3,i=$t())),s()):e(4,c=!0)}async function a(t){return new Promise(n=>{for(let o=1;o<t.length;o++)setTimeout(()=>{e(1,r=wt(r,t[o-1].rowIndex,t[o-1].cellIndex,t[o].rowIndex,t[o].cellIndex)),o===t.length-1&&n()},100*o)})}async function d(t,n){return new Promise(o=>{setTimeout(()=>{const i=function(t,n,e){if(null==t[n][e])return[];const o=[],r=[];for(let o=e;o>=0&&t[n][o]===t[n][e];o--)r.push({rowIndex:n,cellIndex:o});for(let o=e+1;o<9&&t[n][o]===t[n][e];o++)r.push({rowIndex:n,cellIndex:o});const l=[];for(let o=n;o>=0&&t[o][e]===t[n][e];o--)l.push({rowIndex:o,cellIndex:e});for(let o=n+1;o<9&&t[o][e]===t[n][e];o++)l.push({rowIndex:o,cellIndex:e});return r.length>=5&&o.push(r),l.length>=5&&o.push(l),o.flat()}(r,t,n);0!==i.length&&(e(2,l+=5+2*(i.length-5)),e(1,r=function(t,n){if(!n||0===n.length)return t;let e=t;return n.forEach(t=>e=gt(e,t.rowIndex,t.cellIndex)),e}(r,i)),o(!0)),o(!1)},500)})}u();return[o,r,l,i,c,u,f,h,s,a,d,()=>u(),(t,n)=>f(t,n),(t,n)=>h(t,n)]}class Nt extends ot{constructor(t){super(),et(this,t,Dt,Ct,i,{})}}function Ft(n){let e;const o=new Nt({});return{c(){Y(o.$$.fragment)},m(t,n){Z(o,t,n),e=!0},p:t,i(t){e||(Q(o.$$.fragment,t),e=!0)},o(t){V(o.$$.fragment,t),e=!1},d(t){tt(o,t)}}}return new class extends ot{constructor(t){super(),et(this,t,null,Ft,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
